<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="../CSS/Cadastro de Pets.css">
    <script src="../JS/login.js"></script>

    <title>Couple Pet</title>
</head>

<body onload="meuPet();">
    <header>
        <main>
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: rgb(127, 212, 248);">
                <div class="container-fluid">
                    <a class="logo" href="#"><img src="../img/logo.png" alt="logo"
                            style="max-width: 285px; max-height: 103px"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="Perfil.html">Perfil</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="Cadastro de Pet.html">Meu Pet</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="Contatos.html">Contato</a>
                            </li>
                            <li class="nav-item sobre">
                                <a class="nav-link" href="Sobre.html">Sobre</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" onclick="deslogar()" href="../../index.html">Sair</a>
                            </li>
                        </ul>
                        <form action="../HTML/Resultado.html" class="d-flex" role="search">                            
                            <button class="btn btn-outline-success" type="submit">Encontre um pet</button>
                        </form>
                    </div>
                </div>
            </nav>
        </main>
    </header>
    <aside>
        <section class="wrapper grid grid-template row-gap">
            <div class="box-lateral nav-lateral">
                <ul>
                    <a href="Perfil.html"><button class="botao botao-desativado">Perfil</button></a><br>
                    <a href="Cadastro de Pet.html"><button class="botao botao-ativo">Meu Pet</button></a><br>
                    <a href="Contatos.html"><button class="botao botao-desativado">Contatos</button></a><br>
                    <a href="Sobre.html"><button class="botao botao-desativado">Sobre</button></a><br>
                </ul>
            </div>
            <section class="content">
                <div class="">
                    <div class="perfil">
                        <nav class="perfil">
                            <h2>Meu Pet</h2>
                        </nav>
                    </div>
                </div>
                <div class="content">
                    <form  id="bloco">
                        <div class="enviar-foto">
                            <input accept="image/*" type='file' id="imgInpPet" style="padding-top: 10px;" />
                            <img src="../img/foto padrao pet.png" alt="profile-image" id="blahPet"
                                style="width: 190px; height: 190px; border-radius: 20%;">
                        </div>
                        <div class="alinhamento">
                            <div class="box-noticia1">
                                <div id="main-form-perfil-bloco1-campo">
                                    Nome do Pet
                                    <span style="color: cadetblue" ;>*</span>
                                    :
                                </div>
                                <br clear="both">
                                <div id="main-form-perfil-bloco1-campo">
                                    Raça

                                    :
                                </div>
                                <br clear="both">
                                <div id="main-form-perfil-bloco1-campo">
                                    Data de nascimento

                                    :
                                </div>
                                <br clear="both">
                                <div id="main-form-perfil-bloco1-campo">
                                    Gênero

                                    :
                                </div>
                                <br clear="both">
                                <div id="main-form-perfil-bloco1-campo">
                                    Local onde Vive
                                    <span style="color: cadetblue" ;>*</span>
                                    :
                                </div>
                                <br clear="both">
                                <div id="main-form-perfil-bloco1-campo">
                                    Vacinas
                                    <span style="color: cadetblue" ;>*</span>
                                    :
                                </div>

                                <br clear="both">
                                <div id="main-form-perfil-bloco1-campo">
                                    Porte
                                    <span style="color: cadetblue" ;>*</span>
                                    :
                                </div>
                                <br clear="both">
                                <div id="main-form-perfil-bloco1-campo">
                                    Comportamento

                                    :
                                </div>
                            </div>
                            <div class="box-noticia2">
                                <div class="bloco2-nome campo">
                                    <label for="nome "></label>
                                    <input type="text" name="nome" id="nomePet" placeholder="Ex: Duck" required>
                                </div>
                                <div class="bloco2-raça">
                                    <select id="racas"  required>
                                        <option value="...Selecione" selected="selected">Selecione...</option>
                                        <option value="Afghan Hound">Afghan Hound</option>
                                        <option value="Airedale Terrier">Airedale Terrier</option>
                                        <option value="Akita Inu">Akita Inu</option>
                                        <option value="American Pitbull">American Pitbull</option>
                                        <option value="Bassethound">Bassethound</option>
                                        <option value="Beagle">Beagle</option>
                                        <option value="Bichon Frisé">Bichon Frisé</option>
                                        <option value="Boxer">Boxer</option>
                                        <option value="Bull Terrier">Bull Terrier</option>
                                        <option value="Bulldog">Bulldog</option>
                                        <option value="Bullmastiff">Bullmastiff</option>
                                        <option value="Chihuahua">Chihuahua</option>
                                        <option value="Chow Chow">Chow Chow</option>
                                        <option value="Cocker">Cocker</option>
                                        <option value="Collie">Collie</option>
                                        <option value="Dálmata">Dálmata</option>
                                        <option value="Dobermann">Dobermann</option>
                                        <option value="Dogue Alemão">Dogue Alemão</option>
                                        <option value="Fila">Fila</option>
                                        <option value="Fox Terrier Duro">Fox Terrier Duro</option>
                                        <option value="Fox Terrier Liso">Fox Terrier Liso</option>
                                        <option value="Foxhound">Foxhound</option>
                                        <option value="Golden Retriever">Golden Retriever</option>
                                        <option value="Husky">Husky</option>
                                        <option value="Labrador">Labrador</option>
                                        <option value="Lhasa Apso">Lhasa Apso</option>
                                        <option value="Maltês">Maltês</option>
                                        <option value="Mastiff">Mastiff</option>
                                        <option value="O.E.Sheepdog">O.E.Sheepdog</option>
                                        <option value="Pastor Alemão">Pastor Alemão</option>
                                        <option value="Pequinês">Pequinês</option>
                                        <option value="Pinscher">Pinscher</option>
                                        <option value="Pointer Inglês">Pointer Inglês</option>
                                        <option value="Poodle">Poodle</option>
                                        <option value="Rottweiler">Rottweiler</option>
                                        <option value="São Bernardo">São Bernardo</option>
                                        <option value="Schnauzer">Schnauzer</option>
                                        <option value="Setter">Setter</option>
                                        <option value="Shar Pei">Shar Pei</option>
                                        <option value="Shih Tzu">Shih Tzu</option>
                                        <option value="Spitz Alemão">Spitz Alemão</option>
                                        <option value="Staff Bull Terrier">Staff Bull Terrier</option>
                                        <option value="Teckel">Teckel</option>
                                        <option value="Terrier Brasileiro">Terrier Brasileiro</option>
                                        <option value="Vira-Lata">Vira-Lata</option>
                                        <option value="West Highland White Terrier">West Highland White Terrier</option>
                                        <option value="Yorkshire Terrier">Yorkshire Terrier</option>
                                        <option value="Outra">Outra</option>
                                    </select>
                                </div>

                                <div class="bloco2-date ">
                                    <label for="date"></label>
                                    <input type="date" name="nome" id="dtaNascPet">
                                </div>
                                <div class="bloco2-genero ">
                                    <form>
                                        <input type="radio" name="genderPet" id="Macho" value="Macho" required> Macho
                                        <input type="radio" name="genderPet" id="Femea" value="Femea" required> Fêmea
                                    </form>
                                </div>
                                <div class="bloco2-vive ">
                                    <select id="localVive" required>
                                        <option value="...Selecione" selected="selected">Selecione...</option>
                                        <option value="Canil">Canil</option>
                                        <option value="Dentro de Casa">Dentro de Casa</option>
                                        <option value="Pátio">Pátio</option>
                                    </select>
                                </div>
                                <div class="bloco2-vacinas">
                                    <input type="text" name="vacinas" id="vacinas">
                                </div>

                                <div class="bloco2-porte">
                                    <form class="pe">
                                        <form>
                                            <input type="radio" name="porte" id="Grande" value="Grande" required> Grande
                                            <input type="radio" name="porte" id="Medio" value="Medio" required> Médio
                                            <input type="radio" name="porte" id="Pequeno" value="Pequeno" required> Pequeno
                                        </form>
                                    </form>
                                </div>
                                <div class="bloco2-comportamento">
                                    <select id="comportamento" required>
                                        <option value="...Selecione" selected="selected">Selecione...</option>
                                        <option value="Agitado">Agitado</option>
                                        <option value="Agressivo">Agressivo</option>
                                        <option value="Calmo">Calmo</option>
                                        <option value="Dócil">Dócil</option>
                                        <option value="Extrovertido">Extrovertido</option>
                                    </select>
                                </div>
                                <button class="button-sub" type="submit" onclick="Salvar();">Concluído</button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </section>
    </aside>
    <div class="item footer">
        <footer class="bg-light text-center text-lg-start">
            <!-- Copyright -->
            <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
                © 2022 Copyright:
                <a class="text-dark" href="https://pucminas.br">PUC Minas</a> 
            </div>
            <!-- Copyright -->
        </footer>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        /*document.querySelector('#imgInpPet').addEventListener("change", function () {
            const reader = new FileReader();

            reader.addEventListener("load", () => {
                localStorage.setItem("imagem-recente-pet", reader.result)
            });

            reader.readAsDataURL(this.files[0]);
        })


        document.addEventListener("DOMContentLoaded", () => {
            const dadoUrlImagemRecente = localStorage.getItem("imagem-recente-pet");
            if (dadoUrlImagemRecente) {
                document.querySelector("#blahPet").setAttribute("src", dadoUrlImagemRecente);
            }
        });


        imgInpPet.onchange = evt => {
            const [file] = imgInpPet.files
            if (file) {
                blahPet.src = URL.createObjectURL(file)
            }
        }*/

        function Salvar() {
            let cadastrosArmazenado = JSON.parse(localStorage.getItem('cadastro'));
            const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"))
            const novosDados = {
                nomePet: document.getElementById("nomePet").value,
                racas: document.getElementById("racas").value,
                dtaNascPet: document.getElementById("dtaNascPet").value,
                genderPet: document.querySelector('input[name="genderPet"]:checked').value,
                localVive: document.getElementById("localVive").value,
                vacinas: document.getElementById("vacinas").value,
                porte: document.querySelector('input[name="porte"]:checked').value,
                comportamento: document.getElementById("comportamento").value
            }
            cadastrosArmazenado.forEach(item => {

                if (item.id == usuarioLogado) {
                    Object.assign(item, novosDados)
                }
            });


            localStorage.setItem('cadastro', JSON.stringify(cadastrosArmazenado));


        }

        function meuPet() {
            const cadastrosArmazenado = JSON.parse(localStorage.getItem('cadastro'));
            const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"))
            const dadosUsuarioLogado = cadastrosArmazenado.find(item => item.id == usuarioLogado)
            console.log(dadosUsuarioLogado)
            document.getElementById("nomePet").value = dadosUsuarioLogado.nomePet || ""
            const radio = document.getElementById(dadosUsuarioLogado.genderPet)
            radio.checked = true;
            const radioPorte = document.getElementById(dadosUsuarioLogado.porte)
            radioPorte.checked = true;
            document.getElementById("racas").value = dadosUsuarioLogado.racas || "&nbsp"
            document.getElementById("dtaNascPet").value = dadosUsuarioLogado.dtaNascPet || "&nbsp"            
            document.getElementById("localVive").value = dadosUsuarioLogado.localVive || "&nbsp"
            document.getElementById("vacinas").value = dadosUsuarioLogado.vacinas || "&nbsp"            
            document.getElementById("comportamento").value = dadosUsuarioLogado.comportamento || "&nbsp"
        }             
    </script>
</body>

</html>